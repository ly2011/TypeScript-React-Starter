(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{309:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n=function(e){if(!e)return"";var t=new Date(e),a=(new Date).getTime()-t.getTime();return a<0?"":a/1e3<30?"\u521a\u521a":a/1e3<60?Math.floor(a/1e3)+"\u79d2\u524d":a/6e4<60?Math.floor(a/6e4)+"\u5206\u949f\u524d":a/36e5<24?Math.floor(a/36e5)+"\u5c0f\u65f6\u524d":a/864e5<31?Math.floor(a/864e5)+"\u5929\u524d":a/2592e6<12?Math.floor(a/2592e6)+"\u6708\u524d":Math.floor(a/31536e6)+"\u5e74\u524d"}},310:function(e,t,a){"use strict";var n;a.d(t,"a",function(){return c}),function(e){e.ask="ask",e.share="share",e.job="job",e.good="good",e.dev="dev"}(n||(n={}));var c=function(e){if(e.top)return{text:"\u7f6e\u9876",className:"top"};if(e.good)return{text:"\u7cbe\u534e",className:"good"};switch(e.tab){case"ask":return{text:"\u95ee\u7b54",className:e.tab};case"share":return{text:"\u5206\u4eab",className:e.tab};case"job":return{text:"\u62db\u8058",className:e.tab};case"good":return{text:"\u7cbe\u534e",className:e.tab};case"dev":return{text:"\u6d4b\u8bd5",className:e.tab};default:return{text:"",className:"default"}}}},312:function(e,t,a){"use strict";var n=a(319),c=a.n(n),o=a(338),r=a.n(o);c.a.defaults.headers.common["Content-Type"]="application/x-www-form-urlencoded",c.a.defaults.transformRequest=[function(e){return r.a.stringify(e)}];var i=c.a.create({baseURL:"https://cnodejs.org/api/v1",timeout:15e3,transformRequest:[function(e){return r.a.stringify(e)}],headers:{"Content-Type":"application/x-www-form-urlencoded"}});i.interceptors.request.use(function(e){return e.data||(e.data={}),e},function(e){Promise.reject(e)}),i.interceptors.response.use(function(e){return e.data},function(e){return Promise.reject(e)});var s=i;a.d(t,"b",function(){return p}),a.d(t,"a",function(){return u});var l="https://cnodejs.org/api/v1",p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.page,a=void 0===t?1:t,n=e.tab,c=void 0===n?"share":n,o=e.limit,r=void 0===o?20:o,i=e.mdrender;return s({baseURL:l,method:"get",url:"/topics",params:{page:a,tab:c,limit:r,mdrender:void 0===i?"false":i}})},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,a=void 0===t?"":t;return delete e.id,s({baseURL:l,method:"get",url:"/topic/".concat(a),params:e})}},341:function(e,t,a){e.exports={header:"Topics_header__2BWFb",topic_tab:"Topics_topic_tab__2CABq",current_tab:"Topics_current_tab__2GBAe",pagination:"Topics_pagination__2CQfx"}},351:function(e,t,a){e.exports={container:"Topic_container__3KOph",header:"Topic_header__2Ftxv",title:"Topic_title__2sIw-",changes:"Topic_changes__Tuv_n",manage_topic:"Topic_manage_topic__a1mKy","edit-btn":"Topic_edit-btn__2B8Mg","del-btn":"Topic_del-btn__Hmh1O",topic:"Topic_topic__10BnA","topic-content":"Topic_topic-content__KDmzr",topic_content:"Topic_topic_content__3FXrq",tag:"Topic_tag__1-M3A",good:"Topic_good__3BDvC",top:"Topic_top__3qh80"}},358:function(e,t,a){"use strict";a.r(t);a(297);var n=a(311),c=(a(354),a(353)),o=a(23),r=a(24),i=a(29),s=a(25),l=a(28),p=a(0),u=a.n(p),d=a(108),m=a(30),f=a(64),b=a.n(f),g=a(65),h=[{title:"\u5168\u90e8",tab:""},{title:"\u7cbe\u534e",tab:"good"},{title:"\u5206\u4eab",tab:"share"},{title:"\u95ee\u7b54",tab:"ask"},{title:"\u62db\u8058",tab:"job"},{title:"\u5ba2\u6237\u7aef\u6d4b\u8bd5",tab:"dev"}],_=a(298),v=a.n(_),E=a(12),y=a(299),j=a(70),T=a(312),N=a(67),x=a(341),O=a.n(x),w=b()({loader:function(){return a.e(2).then(a.bind(null,357))},loading:g.a}),k=b()({loader:function(){return a.e(1).then(a.bind(null,356))},loading:g.a}),C=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(c)))).changeTab=function(e){var t=a.props.actions.getTopics,n=e.tab;n!==a.props.tab&&t({tab:n,page:1})},a.handlePaginationChange=function(e){var t={tab:a.props.tab,page:e};(0,a.props.actions.getTopics)(t)},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.actions.getTopics)()}},{key:"render",value:function(){var e=this,t=this.props,a=t.topics,o=void 0===a?[]:a,r=t.loading,i=t.tab,s=t.pageInfo;return u.a.createElement("section",{className:O.a.container},u.a.createElement("div",{className:"main"},u.a.createElement(k,null),u.a.createElement("div",{className:"content"},u.a.createElement("div",{className:"panel"},u.a.createElement("header",{className:"header"},h&&h.map(function(t){return u.a.createElement("a",{className:"".concat(O.a.topic_tab," ").concat(O.a[t.tab===i?"current_tab":""]),key:t.tab,onClick:function(){return e.changeTab(t)}},t.title)})),u.a.createElement("div",{className:"inner no-padding ".concat(O.a.table_box)},u.a.createElement(n.a,{loading:r,active:!0},u.a.createElement(w,{topics:o}),s.total&&u.a.createElement("div",{className:O.a.pagination},u.a.createElement(c.a,{defaultCurrent:s.page,pageSize:s.limit,total:s.total,onChange:this.handlePaginationChange}))))))))}}]),t}(u.a.Component),M={getTopics:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{page:1},t=N.a.getState();return function(){var a=Object(y.a)(v.a.mark(function a(n){var c,o,r,i,s,l,p,u,d,m;return v.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=e.tab,o=void 0===c?"":c,r=e.page,i=void 0===r?1:r,s=e.limit,l=void 0===s?t.topics.pageInfo.limit:s,p=!0,n({type:j.a,data:!0}),u=Object(E.a)({},t.topics.pageInfo,{page:i,limit:l}),d=Object(E.a)({},u,{tab:o}),n({type:j.c,data:{tab:o}}),n({type:j.b,data:u}),a.prev=7,a.next=10,T.b(d);case 10:(m=a.sent).success&&n({type:j.d,data:{topics:m.data,clear:p}}),n({type:j.a,data:!1}),a.next=19;break;case 15:a.prev=15,a.t0=a.catch(7),t.topics.tab===o&&n({type:j.b,data:{page:t.topics.pageInfo.page}}),n({type:j.a,data:!1});case 19:case"end":return a.stop()}},a,this,[[7,15]])}));return function(e){return a.apply(this,arguments)}}()}};t.default=Object(d.b)(function(e,t){return{topics:e.topics.topics,loading:e.topics.loading,tab:e.topics.tab,pageInfo:e.topics.pageInfo}},function(e,t){return{actions:Object(m.bindActionCreators)(M,e)}})(C)},359:function(e,t,a){"use strict";a.r(t);a(297);var n=a(311),c=(a(146),a(13)),o=(a(145),a(74)),r=a(23),i=a(24),s=a(29),l=a(25),p=a(28),u=a(0),d=a.n(u),m=a(108),f=a(291),b=a(30),g=a(64),h=a.n(g),_=a(309),v=a(65),E=a(298),y=a.n(E),j=a(299),T=a(101),N=a(312),x=a(310),O=a(351),w=a.n(O),k=h()({loader:function(){return a.e(1).then(a.bind(null,356))},loading:v.a}),C=function(e){function t(){return Object(r.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.actions.getTopic)({id:this.props.match.params.id})}},{key:"render",value:function(){var e=this.props,t=e.topic,a=e.loading,r=e.accesstoken;return d.a.createElement("section",{className:w.a.container},d.a.createElement("div",{className:"main"},d.a.createElement(k,null),d.a.createElement("div",{className:"content"},d.a.createElement("div",{className:"panel"},d.a.createElement(n.a,{loading:a,active:!0},d.a.createElement("header",{className:"header ".concat(w.a.header)},d.a.createElement("h3",{className:w.a.title},d.a.createElement("span",{className:"".concat(w.a.tag," ").concat(w.a[Object(x.a)(t).className])},Object(x.a)(t).text),t.title),d.a.createElement("div",{className:"".concat(w.a.changes," clearfix")},d.a.createElement("span",null,"\u53d1\u5e03\u4e8e ",Object(_.a)(t.create_at)),d.a.createElement("span",null,"\u4f5c\u8005 ",t.author&&t.author.loginname),d.a.createElement("span",null,t.visit_count," \u6b21\u6d4f\u89c8"),d.a.createElement("span",null,"\u6700\u540e\u4e00\u6b21\u7f16\u8f91\u662f ",Object(_.a)(t.last_reply_at)),d.a.createElement("span",null,"\u6765\u81ea ",Object(x.a)(t).text),r&&t.is_collect&&d.a.createElement(o.a,{size:"small",className:"pull-right"},"\u53d6\u6d88\u6536\u85cf"),r&&!t.is_collect&&d.a.createElement(o.a,{type:"primary",size:"small",className:"pull-right"},"\u6536\u85cf"),d.a.createElement("div",{className:w.a.manage_topic},d.a.createElement(f.a,{to:"/topic/".concat(t.id,"/edit")},d.a.createElement(c.a,{type:"form",style:{fontSize:"18px"}})),d.a.createElement("a",{href:"javascript:;",onClick:function(){}},d.a.createElement(c.a,{type:"delete",style:{fontSize:"18px"}}))))),d.a.createElement("div",{className:"".concat(w.a.topic," inner")},d.a.createElement("div",{className:w.a.topic_content,dangerouslySetInnerHTML:{__html:t.content}})))))))}}]),t}(d.a.Component),M={getTopic:function(e){return function(){var t=Object(j.a)(y.a.mark(function t(a){var n,c;return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:T.a,data:!0}),t.prev=1,t.next=4,N.a(e);case 4:n=t.sent,c={},n.success&&(c=n.data),a({type:T.b,data:{topic:c}}),a({type:T.a,data:!1}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),a({type:T.a,data:!1});case 14:case"end":return t.stop()}},t,this,[[1,11]])}));return function(e){return t.apply(this,arguments)}}()}};t.default=Object(m.b)(function(e,t){return{topic:e.topic.topic,loading:e.topic.loading,accesstoken:e.user.accesstoken}},function(e,t){return{actions:Object(b.bindActionCreators)(M,e)}})(C)}}]);
//# sourceMappingURL=Topics.0eac5981.chunk.js.map